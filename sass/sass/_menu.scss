.menu {
  @include box-sizing;
  margin: 0;
  min-height: 2.75em;
  position: relative;
  z-index: 99;
  // 預設選單 ul
  clear: both;
  >ul {
    text-align: left;
    margin: 0;
    padding: 0;
    line-height: 2.75em;
    // 第一層選單樣式
    >li {
      display: inline-block;
      vertical-align: top;
      position: static;
      margin-right: -4px;
      // min-width: 10em;
      >a {
        display: block;
        padding: 0 20px;
        min-height: 3em;
        line-height: 3em;
        color: #fff;
        position: relative;
        transition: all 0.3s cubic-bezier(.25,.8,.25,1);
        @media all and (max-width: 1199px) {
          padding: 0 19px;
        }
        @media all and (max-width: 1178px) {
          padding: 0 18px;
        }
        @media all and (max-width: 1158px) {
          padding: 0 17px;
        }
        @media all and (max-width: 1153px) {
          padding: 0 16px;
        }
        @media all and (max-width: 1131px) {
          padding: 0 15px;
        }
        @media all and (max-width: 1109px) {
          padding: 0 14px;
        }
        @media all and (max-width: 1087px) {
          padding: 0 13px;
        }
        @media all and (max-width: 1065px) {
          padding: 0 12px;
        }
        @media all and (max-width: 1043px) {
          padding: 0 11px;
        }
        @media all and (max-width: 1021px) {
          padding: 0 10px;
        }
        @media all and (max-width: 999px) {
          padding: 0 9px;
        }
        @media all and (max-width: 977px) {
          padding: 0 8px;
        } 
        @media all and (max-width: 955px) {
          padding: 0 7px;
        } 
        // @media all and (max-width: 949px) {
        //   padding: 0 7px;
        // }
        &:hover,&:focus{
          box-shadow: 0 0 0 0 #000 inset;
        }
      }
      &:last-child{
        background: rgb(191,164,45);
        background: linear-gradient(90deg, rgba(191,164,45,1) 0%, rgba(154,123,14,1) 100%);
        float: right;
        margin-right: 0;
        @include screen('mobile') {
          display: none!important;
        }
        .megamenu{
          .menuTitle{
            &:before{
              background: url(../images/header/menu_search.png) no-repeat center center;
            }
          }
        }
      }
      &:nth-last-child(2){
        background: rgb(89,120,164);
        background: linear-gradient(90deg, rgba(89,120,164,1) 0%, rgba(42,71,111,1) 100%);
        .megamenu{
          background: rgba(0,40,96,.9);
        }
      }
      &.hasChild {
        >a {
          &:after {
            content: '';
            width: 4px;
            height: 4px;
            display: inline-block;
            margin-left: .5em;
            vertical-align: middle;
            border: 2px solid #fff;
            transform: rotate(135deg);
            border-bottom: none;
            border-left: none;
            margin-bottom: .2em;
          }
        }
      }
      .megamenu{
        display: none;
        overflow: visible;
        background: rgba(0, 0, 0, .8);
        width: 100%;
        padding: 1.5em 3em;
        box-sizing: border-box;
        z-index: 999999;
        position: absolute;
        top: auto;
        left: 0;
        text-align: left;
        animation: showMenu .3s ease-out;
        @include screen('mobile') {
          background: #fff;
          padding: 0;
          position: relative;
        }
        .menu_2nd{
          @include make-xs-column(12);
          @include make-sm-column(7);
          @include make-md-column(7);
          @include make-lg-column(7);
          @include screen('mobile') {
            border-left: 5px solid $primaryColor;
            font-size: 0.937em;
          }
          ul{
            padding: 0;
            list-style: none;
            li{
              a:hover,a:focus{
                box-shadow: 0 0 0 0 #000 inset;
              }
            }
            ul{
              display: none;
            }
          }
        }
        .ad{
          @include make-xs-column(12);
          @include make-sm-column(5);
          @include make-md-column(5);
          @include make-lg-column(5);
          position: relative;
          @include screen('mobile') {
            display: none;
          }
          a{
            width: 365px;
            height: 182px;
            display: block;
            overflow: hidden;
            position: relative;
            float: right;
            border:2px solid rgba(0,0,0,0);
            @include screen('tablet') {
              width: 100%;
              height: auto;
            }
            &:hover,&:focus{
              border:2px solid $lightColor;
            }
          }
          .caption{
            background: rgba(255,255,255,.8);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #000;
            line-height: 2em;
            height: 2em;
            position: absolute;
            z-index: 10;
            left: 0;
            bottom: 0;
            width: 100%;
            padding: 0 1.5em 0 .5em;
            font-size: 0.937em;
            box-sizing: border-box;
            &:after{
              content: '';
              width: 14px;
              height: 14px;
              display: block;
              position: absolute;
              right: .5em;
              top: 8px;
              background:url(../images/icon_more.png) no-repeat right center;
            }
          }
          img{
            width: 365px;
            height: auto;
            @include screen('tablet') {
              width: 100%;
              height: auto;
            }
          }
        }
        .menuTitle{
          font-size: 1.375em;
          color: #fff;
          float: left;
          width: 12%;
          text-align: center;
          font-weight: normal;
          letter-spacing: 2px;
          margin-top: 1em;
          @include screen('mobile') {
            display: none;
          }
          &:before{
            content: "";
            width: 57px;
            height: 57px;
            display: block;
            margin: 0 auto;
            background: url(../images/header/menu_title.png) no-repeat center center;
          }
        }
        .menuSlider{
          width: 85%;
          display: block;
          float: right;
          font-size: 1em;
          @include screen('mobile') {
            width: 100%;
            margin: 0;
            float: none;
            overflow: hidden;
          }
          .slide{
            padding: 0 1em;
            @include make-xs-column(12);
            @include make-sm-column(2);
            @include make-md-column(2);
            @include make-lg-column(2);
            box-sizing: border-box;
            @include screen('mobile') {
              padding: 0;
              border-left: 5px solid #2a476f;
            }
            .icon{
              width: 96px;
              height: 96px;
              border:1px solid #768ba9;
              margin: 0 auto 12px auto;
              display: block;
              background: rgba(0,0,0,.1);
              @include screen('mobile') {
                display: none;
              }
              img{
                width: 96px;
                height: 96px;

              }
            }
            .icon_title{
              line-height: 1.5em;
              overflow: hidden;
              color: #fff;
              display: block;
              text-align: center;
              @include screen('mobile') {
                padding: .8em 1em!important;
                text-align: left;
                color: #222;
                border-bottom: 1px solid #CCC;
                background: #e5e5e5;
              }
            }
            a{
              transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            }
            a:hover,a:focus{
              box-shadow: 0 0 0 0 #000 inset;
              @include screen('mobile') {
                background: rgba(0,0,0,0.15);
              }
              .icon{
                border:1px solid $secondaryColor;
              }
              .icon_title{
                color: $secondaryColor;
                @include screen('mobile') {
                  color:#222;
                }
              }
            }
          }
          .slick-prev, .slick-next{
            filter: invert(0);
          }
        }
        .more{
          position: absolute;
          right: 20px;
          bottom: 10px;
          font-size: 0.9375em;
          @include screen('mobile') {
            position: relative;
            right: auto;
            bottom: auto;
            border-left: 5px solid #2a476f;
            border-bottom: 1px solid #CCC;
            background: #e5e5e5;
            font-size: 1em;
          }
          a{
            color: #fff;
            position: relative;
            display: block;
            padding: 4px 4px 4px 1.5em;
            line-height: 150%;
            @include screen('mobile') {
              padding: 0.8em 1em !important;
              color: #222;
            }
            &:before{
              content: '';
              width: 14px;
              height: 14px;
              display: block;
              position: absolute;
              left: 0;
              top: 8px;
              background:url(../images/icon_more.png) no-repeat right center;
              filter: invert(1);
              @include screen('mobile') {
                display: none;
              }
            }
          }
        }
        .search {
          width: 76%;
          margin-right: 4%;
          margin-top: 1.5em;
          display: block;
          float: right;
          form{
            display: block;
            font-size: 1em;
          }
          .form_grp {
            margin: 0 !important;
            width: 70%;
            float: left;
            input {
              margin: 0;
              padding: 10px 35px 10px .5em;
              border-radius: 0;
              width: 100%;
              border: 1px solid #000;
              vertical-align: top;
            }
          }
          .btn_grp {
            margin: 0;
            padding: 0;
            width: 30%;
            input,input[type="submit"] {
              margin: 0 0 0 3%;
              padding: 8px .5em;
              width: 47%;
              border-radius: 0;
              background: $lightColor;
              border:1px solid $lightColor;
              float: left;
              vertical-align: top;
              &:hover,&:focus{
                background: $linkColor;
                border:1px solid $linkColor;
              }
              &.advance{
                background: $aHover;
                border:1px solid $aHover;
                &:hover,&:focus{
                  background: $primaryColor;
                  border:1px solid $primaryColor;
                }
              }
            }
          }
          .keywordHot {
            display: block;
            line-height: 1.65em;
            clear: both;
            &:before {
              display: inline-block;
              content: "熱門關鍵字：";
              color: #fff;
              vertical-align: middle;
            }
            ul {
              margin: 0;
              padding: 0;
              display: inline-block;
              vertical-align: middle;
              li {
                width: auto;
                margin: 0 .6em 0 0;
                padding: 0;
                display: inline-block;
                border-left: 0;
              }
              a {
                color: #FFF;
                padding: 0;
                &:hover,&:focus{
                  text-decoration: underline;
                  color: $secondaryColor;
                  box-shadow: 0 0 0 0 #000 inset;
                }
              }
            }
          }
        }
      }
      >a {
        &:hover,&:focus{
          &:after {
            border: 2px solid $secondaryColor;
            border-bottom: none;
            border-left: none;
          }
          &:before{
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: $secondaryColor;
            @include screen('mobile') {
              display: none;
            }
          }
        }
      }
      &:last-child{
        >a:hover,>a:focus{
          background: rgb(228,202,51);
          background: linear-gradient(90deg, rgba(228,202,51,1) 0%, rgba(191,151,0,1) 100%);
          &:before{
            display: none;
          }
          &:after {
            border: 2px solid #fff;
            border-bottom: none;
            border-left: none;
          }
        }

      }
      &:nth-last-child(2){
        >a:hover,>a:focus{
          background: rgb(74,134,217);
          background: linear-gradient(90deg, rgba(74,134,217,1) 0%, rgba(30,72,178,1) 100%);
          &:before{
            display: none;
          }
        }
      }

    }
    // ul {
    //   display: none;
    //   overflow: visible;
    //   width: 200px;
    //   background: rgba(0, 0, 0, .8);
    //   padding: 0;
    //   z-index: 999999;
    //   position: absolute;
    //   top: auto;
    //   left: 0;
    //   list-style: none;
    //   text-align: left;
    //   animation: showMenu .3s ease-out;
    //   ul {
    //     top: 0;
    //     left: 170px;
    //     animation: none;
    //   }
    // }
  }
  // 預設選單 li
  li {
    position: relative;
    a {
      display: block;
      outline: none;
      text-decoration: none;
    }
    // 第二層選單樣式
    li {
      float: left;
      width: 33%;
      a {
        line-height: 1.5em;
        color: #FFF;
        padding: .5em;
        &:hover, &:focus {
          color: $secondaryColor;
        }
      }
    }
    li.hasChild {
      >ul {
        z-index: 999;
      }
      >a {
        padding-right: 2em;
        &:hover,
        &:focus {
          background: $primaryColor;
        }
        &:after {
          content: '';
          position: absolute;
          right: 10px;
          top: 1.3em;
          width: 6px;
          height: 6px;
          border: 2px solid #FFF;
          transform: rotate(45deg);
          border-bottom: none;
          border-left: none;
        }
      }
    }
  }
}
// 行動版選單sidebar
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: 99999999;
  display: none;
  overflow-x: hidden !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
  -webkit-transform: translate3d(0, 0, 0);
  @include box-sizing;
  >.menu_overlay {
    background: RGBA(0, 0, 0, .5);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: block;
    z-index: 9;
    display: none;
    overflow-x: hidden !important;
    overflow-y: auto !important;
  }
  .m_area {
    &:before {
      content: "";
      width: 280px;
      position: absolute;
      top: 0;
      left: 0;
      color: #FFF;
      width: 100%;
      height: 3em;
      background: $primaryColor;
      padding: 0 1em;
      line-height: 3em;
      @include box-sizing;
    }
    width:280px;
    padding: 3em 0;
    position:absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: $primaryColor;
    overflow:hidden;
    overflow-y: auto;
    z-index: 9999;
    -webkit-overflow-scrolling: touch;
    -webkit-transform: translate3d(0, 0, 0);
    @include box-sizing;
    .menu {
      width: 100%;
      @include box-shadow(0px 0px 4px RGBA(0, 0, 0, .4));
      margin-bottom: 1em;
      background: #CCC;
      a {
        display: block;
        color: #222;
        text-decoration: none;
        transition: .4s ease-out;
      }
      ul {
        >ul {
          display: none;
          width: 100%;
          margin: 0;
          background: rgba(0, 0, 0, .09);
          font-size: .938em;
          position: relative;
          @include screen('mobile') {
            display: block
          }
          a {
            padding-left: 2em;
          }
          ul {
            left: 0;
            display: none;
            ul {
              display: none;
            }
          }
        }
      }
      li {
        display: block;
        float: none;
        width: 100%;
        ul {
          background: #FFF;
        }
        >a {
          padding: .5em 1em;
          background: #FFF;
          border-bottom: 1px solid #CCC;
        }
        &.hasChild {
          >a {
            padding: .5em 1em;
            color: #222;
            background: #FFF;
            padding-right: 36px;
            position: relative;
            &:after {
              content: '';
              position: absolute;
              right: 16px;
              top: 1.5em;
              width: 5px;
              line-height: 1.25em;
              height: 5px;
              border: 2px solid #222;
              transform: rotate(45deg);
              border-top: none;
              border-left: none;
              transition: .3s;
            }
          }
        }
        li {
          background: #FFF;
          a {
            padding: .8em 1em!important;
            background: rgba(0, 0, 0, .1);
            &:hover,
            &:focus {
              color: #000;
              background: rgba(0, 0, 0, .15);
            }
          }
          &.hasChild {
            a {
              background: rgba(0, 0, 0, .1);
              padding: .8em 1em .8em 2em;
              &:hover,
              &:focus {
                background: rgba(0, 0, 0, .1);
              }
            }
          }
          li {
            a {
              background: rgba(0, 0, 0, .15) !important;
              padding: .8em 1em .8em 4em !important;
              border-bottom: 1px solid #BBB;
              &:hover,
              &:focus {
                background: rgba(0, 0, 0, .25) !important;
              }
              &:after {
                display: none !important;
              }
            }
          }
        }
      }
    }
  }
  .navigation {
    position: relative;
    text-align: left;
    ul {
      float: none;
      width: 90%;
      margin: 1em auto;
      padding: 0;
      overflow: hidden;
      list-style: none;
      border: 1px solid rgba(255, 255, 255, .5);
      border-bottom: none;
      border-right: none;
      li {
        float: left;
        width: 50%;
        margin: 0;
        padding: 0;
        @include box-sizing;
        &:nth-child(odd):last-child {
          width: 100%;
        }
        a {
          display: block;
          height: 3em;
          line-height: 2em;
          padding: .5em 1em;
          font-size: .938em;
          color: #FFF;
          font-weight: bold;
          text-decoration: none;
          border: 1px solid rgba(255, 255, 255, .5);
          @include box-sizing;
          &:nth-child(odd) {
            border-left: none;
            border-top: none;
          }
          &:hover,
          &:focus {
            background: darken($primaryColor, 20);
          }
        }
      }
    }
    .language {
      position: relative;
      width: 100%;
      @include gutter;
      a {
        padding: .6em 1em;
        background: rgba(0, 0, 0, .4);
        &:after {
          top: 1.3em;
        }
        &:before {
          top: .8em;
        }
      }
      ul {
        width: 100%;
        margin: 0;
        position: relative;
        top: 0;
        padding: 0;
        border: none;
        background:none;
        li {
          width: 100% !important;
          a {
            border: none;
            background: rgba(0, 0, 0, .4);
          }
        }
      }
    }
  }
  button.sidebarClose {
    position: absolute;
    display: block;
    width: 3em !important;
    height: 3em !important;
    padding: 0;
    min-width: auto;
    top: 0px;
    right: 0px;
    margin: 0;
    text-indent: -9999px;
    border: none;
    background: none;
    border: none;
    &:before {
      position: absolute;
      width: 15px;
      height: 15px;
      border: 3px solid #eee;
      content: "";
      top: 15px;
      right: 10px;
      transform: rotate(45deg);
      border-right: none;
      border-top: none;
    }
  }
}
//animation
@keyframes showMenu {
  0% {
    left: 20px;
  }
  100% {
    left: 0px;
  }
}